package me.bait.exploitsx.util;

import me.bait.exploitsx.ExploitsX;
import me.bait.exploitsx.Messages;
import org.bukkit.Bukkit;
import org.bukkit.configuration.file.YamlConfiguration;

import java.io.*;
import java.util.ArrayList;
import java.util.List;

@SuppressWarnings({"unused"})
public class ConfigHelper {
    private ConfigHelper() {}

    public static File d = new File(Messages.getString("CH.2"));
    static File c = new File(Messages.getString("CH.0"));
    static File l = new File(Messages.getString("CH.1"));

    static YamlConfiguration cgold = YamlConfiguration
            .loadConfiguration(new InputStreamReader(ExploitsX.getPlugin().getResource(Messages.getString("CH.3"))));
    static YamlConfiguration lgold = YamlConfiguration
            .loadConfiguration(new InputStreamReader(ExploitsX.getPlugin().getResource(Messages.getString("CH.4"))));
    static YamlConfiguration dgold = YamlConfiguration
            .loadConfiguration(new InputStreamReader(ExploitsX.getPlugin().getResource(Messages.getString("CH.5"))));

    private static void copy(InputStream in, File file) {
        try {
            try (OutputStream out = new FileOutputStream(file)) {
                byte[] buf = new byte[1024];
                int len;
                while ((len = in.read(buf)) > 0)
                    out.write(buf, 0, len);
            }

            in.close();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public static void enable() {
        ExploitsX.getPlugin().saveDefaultConfig();
        if (!l.exists()) {
            copy(ExploitsX.getPlugin().getResource(Messages.getString("CH.6")), l);
        }
        if (!d.exists()) {
            copy(ExploitsX.getPlugin().getResource(Messages.getString("CH.7")), d);
        }
    }

    public static boolean getBoolean(String val) {
        String type = Messages.getString("CH.8");
        YamlConfiguration cy = YamlConfiguration.loadConfiguration(c);
        YamlConfiguration ly = YamlConfiguration.loadConfiguration(l);
        YamlConfiguration dy = YamlConfiguration.loadConfiguration(d);
        if (val == null)
            return false;
        if (cy.contains(val)) {
            return cy.getBoolean(val);
        } else if (ly.contains(val)) {
            return ly.getBoolean(val);
        } else if (dy.contains(val)) {
            return dy.getBoolean(val);
        } else {
            Bukkit.getLogger().warning(Messages.getString("CH.9") + val
                    + Messages.getString("CH.10") + type + Messages.getString("CH.11"));
            if (cgold.contains(val)) {
                return cgold.getBoolean(val);
            } else if (lgold.contains(val)) {
                return lgold.getBoolean(val);
            } else if (dgold.contains(val)) {
                return dgold.getBoolean(val);
            } else {
                Bukkit.getLogger().warning(Messages.getString("CH.12")
                        + val + Messages.getString("CH.13") + type + Messages.getString("CH.14"));
                return false;
            }
        }
    }

    public static boolean getBoolean(String val, Boolean e) {
        String type = Messages.getString("CH.15");
        YamlConfiguration cy = YamlConfiguration.loadConfiguration(c);
        YamlConfiguration ly = YamlConfiguration.loadConfiguration(l);
        YamlConfiguration dy = YamlConfiguration.loadConfiguration(d);
        if (val == null || e == null)
            return e;
        if (cy.contains(val)) {
            return cy.getBoolean(val);
        } else if (ly.contains(val)) {
            return ly.getBoolean(val);
        } else if (dy.contains(val)) {
            return dy.getBoolean(val);
        } else {
            Bukkit.getLogger().warning(Messages.getString("CH.16") + val + Messages.getString("CH.17")
                    + type + Messages.getString("CH.18"));
            return e;
        }
    }

    public static double getDouble(String val) {
        String type = Messages.getString("CH.19");
        YamlConfiguration cy = YamlConfiguration.loadConfiguration(c);
        YamlConfiguration ly = YamlConfiguration.loadConfiguration(l);
        YamlConfiguration dy = YamlConfiguration.loadConfiguration(d);
        if (val == null)
            return 0.0;
        if (cy.contains(val)) {
            return cy.getDouble(val);
        } else if (ly.contains(val)) {
            return ly.getDouble(val);
        } else if (dy.contains(val)) {
            return dy.getDouble(val);
        } else {
            Bukkit.getLogger().warning(Messages.getString("CH.20") + val
                    + Messages.getString("CH.21") + type + Messages.getString("CH.22"));
            if (cgold.contains(val)) {
                return cgold.getDouble(val);
            } else if (lgold.contains(val)) {
                return lgold.getDouble(val);
            } else if (dgold.contains(val)) {
                return dgold.getDouble(val);
            } else {
                Bukkit.getLogger().warning(Messages.getString("CH.23")
                        + val + Messages.getString("CH.24") + type + Messages.getString("CH.25"));
                return 0.0;
            }
        }
    }

    public static double getDouble(String val, double e) {
        String type = Messages.getString("CH.26");
        YamlConfiguration cy = YamlConfiguration.loadConfiguration(c);
        YamlConfiguration ly = YamlConfiguration.loadConfiguration(l);
        YamlConfiguration dy = YamlConfiguration.loadConfiguration(d);
        if (val == null)
            return e;
        if (cy.contains(val)) {
            return cy.getDouble(val);
        } else if (ly.contains(val)) {
            return ly.getDouble(val);
        } else if (dy.contains(val)) {
            return dy.getDouble(val);
        } else {
            Bukkit.getLogger().warning(Messages.getString("CH.27") + val + Messages.getString("CH.28")
                    + type + Messages.getString("CH.29"));
            return e;
        }
    }

    public static int getInt(String val) {
        String type = Messages.getString("CH.30");
        YamlConfiguration cy = YamlConfiguration.loadConfiguration(c);
        YamlConfiguration ly = YamlConfiguration.loadConfiguration(l);
        YamlConfiguration dy = YamlConfiguration.loadConfiguration(d);
        if (val == null)
            return 0;
        if (cy.contains(val)) {
            return cy.getInt(val);
        } else if (ly.contains(val)) {
            return ly.getInt(val);
        } else if (dy.contains(val)) {
            return dy.getInt(val);
        } else {
            Bukkit.getLogger().warning(Messages.getString("CH.31") + val
                    + Messages.getString("CH.32") + type + Messages.getString("CH.33"));
            if (cgold.contains(val)) {
                return cgold.getInt(val);
            } else if (lgold.contains(val)) {
                return lgold.getInt(val);
            } else if (dgold.contains(val)) {
                return dgold.getInt(val);
            } else {
                Bukkit.getLogger().warning(Messages.getString("CH.34")
                        + val + Messages.getString("CH.35") + type + Messages.getString("CH.36"));
                return 0;
            }
        }
    }

    public static int getInt(String val, int e) {
        String type = Messages.getString("CH.37");
        YamlConfiguration cy = YamlConfiguration.loadConfiguration(c);
        YamlConfiguration ly = YamlConfiguration.loadConfiguration(l);
        YamlConfiguration dy = YamlConfiguration.loadConfiguration(d);
        if (val == null)
            return e;
        if (cy.contains(val)) {
            return cy.getInt(val);
        } else if (ly.contains(val)) {
            return ly.getInt(val);
        } else if (dy.contains(val)) {
            return dy.getInt(val);
        } else {
            Bukkit.getLogger().warning(Messages.getString("CH.38") + val + Messages.getString("CH.39")
                    + type + Messages.getString("CH.40"));
            return e;
        }
    }

    public static String getString(String val) {
        String type = Messages.getString("CH.41");
        YamlConfiguration cy = YamlConfiguration.loadConfiguration(c);
        YamlConfiguration ly = YamlConfiguration.loadConfiguration(l);
        YamlConfiguration dy = YamlConfiguration.loadConfiguration(d);
        if (val == null)
            return Messages.getString("CH.42");
        if (cy.contains(val)) {
            return cy.getString(val);
        } else if (ly.contains(val)) {
            return ly.getString(val);
        } else if (dy.contains(val)) {
            return dy.getString(val);
        } else {
            Bukkit.getLogger().warning(Messages.getString("CH.43") + val
                    + Messages.getString("CH.44") + type + Messages.getString("CH.45"));
            if (cgold.contains(val)) {
                return cgold.getString(val);
            } else if (lgold.contains(val)) {
                return lgold.getString(val);
            } else if (dgold.contains(val)) {
                return dgold.getString(val);
            } else {
                Bukkit.getLogger().warning(Messages.getString("CH.46")
                        + val + Messages.getString("CH.47") + type + Messages.getString("CH.48"));
                return Messages.getString("CH.49");
            }
        }
    }

    public static String getString(String val, String e) {
        String type = Messages.getString("CH.50");
        YamlConfiguration cy = YamlConfiguration.loadConfiguration(c);
        YamlConfiguration ly = YamlConfiguration.loadConfiguration(l);
        YamlConfiguration dy = YamlConfiguration.loadConfiguration(d);
        if (val == null || e == null)
            return e;
        if (cy.contains(val)) {
            return cy.getString(val);
        } else if (ly.contains(val)) {
            return ly.getString(val);
        } else if (dy.contains(val)) {
            return dy.getString(val);
        } else {
            Bukkit.getLogger().warning(Messages.getString("CH.51") + val + Messages.getString("CH.52")
                    + type + Messages.getString("CH.53"));
            return e;
        }
    }

    public static List<String> getStringList(String val) {
        String type = Messages.getString("CH.54");
        List<String> list = new ArrayList<>();
        list.add(Messages.getString("CH.55"));
        YamlConfiguration cy = YamlConfiguration.loadConfiguration(c);
        YamlConfiguration ly = YamlConfiguration.loadConfiguration(l);
        YamlConfiguration dy = YamlConfiguration.loadConfiguration(d);
        if (val == null)
            return list;
        if (cy.contains(val)) {
            return cy.getStringList(val);
        } else if (ly.contains(val)) {
            return ly.getStringList(val);
        } else if (dy.contains(val)) {
            return dy.getStringList(val);
        } else {
            Bukkit.getLogger().warning(Messages.getString("CH.56") + val
                    + Messages.getString("CH.57") + type + Messages.getString("CH.58"));
            if (cgold.contains(val)) {
                return cgold.getStringList(val);
            } else if (lgold.contains(val)) {
                return lgold.getStringList(val);
            } else if (dgold.contains(val)) {
                return dgold.getStringList(val);
            } else {
                Bukkit.getLogger().warning(Messages.getString("CH.59")
                        + val + Messages.getString("CH.60") + type + Messages.getString("CH.61"));
                return list;
            }
        }
    }

    public static List<String> getStringList(String val, List<String> e) {
        String type = Messages.getString("CH.62");
        YamlConfiguration cy = YamlConfiguration.loadConfiguration(c);
        YamlConfiguration ly = YamlConfiguration.loadConfiguration(l);
        YamlConfiguration dy = YamlConfiguration.loadConfiguration(d);
        if (val == null || e == null)
            return e;
        if (cy.contains(val)) {
            return cy.getStringList(val);
        } else if (ly.contains(val)) {
            return ly.getStringList(val);
        } else if (dy.contains(val)) {
            return dy.getStringList(val);
        } else {
            Bukkit.getLogger().warning(Messages.getString("CH.63") + val + Messages.getString("CH.64")
                    + type + Messages.getString("CH.65"));
            return e;
        }
    }
}
