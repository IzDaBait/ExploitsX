package me.bait.exploitsx.exploits;

import org.bukkit.Location;
import org.bukkit.World;
import org.bukkit.event.EventHandler;
import org.bukkit.event.Listener;
import org.bukkit.event.block.BlockDispenseEvent;
import org.bukkit.event.player.PlayerBucketEmptyEvent;

public class PortalBreaker implements Listener {
    String epo = "PORTAL";

    @EventHandler
    public void onBucket(PlayerBucketEmptyEvent event) {
        Location blc = event.getBlockClicked().getLocation();
        World world = blc.getWorld();
        int x = blc.getBlockX();
        int z = blc.getBlockZ();
        int y = blc.getBlockY();
        int yNeg = y - 1;
        int yPos = y + 1;
        int xNeg = x - 1;
        int zNeg = z - 1;
        int xPos = x + 1;
        int zPos = z + 1;
        if (event.getBlockClicked().getType().toString().contains("PORTAL")
                || world.getBlockAt(x, yNeg, z).getType().toString().contains(epo)
                || world.getBlockAt(x, yPos, z).getType().toString().contains(epo)
                || world.getBlockAt(x, y, zNeg).getType().toString().contains(epo)
                || world.getBlockAt(xNeg, y, z).getType().toString().contains(epo)
                || world.getBlockAt(x, y, zPos).getType().toString().contains(epo)
                || world.getBlockAt(xPos, y, z).getType().toString().contains(epo)) {
            event.setCancelled(true);
        }
    }

    @EventHandler
    public void onDispense(BlockDispenseEvent event) {
        Location loc = event.getBlock().getLocation();
        World world = loc.getWorld();
        int x = loc.getBlockX();
        int z = loc.getBlockZ();
        int y = loc.getBlockY();
        int yNeg = y - 1;
        int yPos = y + 1;
        int xNeg = x - 1;
        int zNeg = z - 1;
        int xPos = x + 1;
        int zPos = z + 1;
        if (event.getBlock().getType().toString().contains("PORTAL")
                || world.getBlockAt(x, yNeg, z).getType().toString().contains(epo)
                || world.getBlockAt(x, yPos, z).getType().toString().contains(epo)
                || world.getBlockAt(x, y, zNeg).getType().toString().contains(epo)
                || world.getBlockAt(xNeg, y, z).getType().toString().contains(epo)
                || world.getBlockAt(x, y, zPos).getType().toString().contains(epo)
                || world.getBlockAt(xPos, y, z).getType().toString().contains(epo)) {
            event.setCancelled(true);
        }
    }
}
